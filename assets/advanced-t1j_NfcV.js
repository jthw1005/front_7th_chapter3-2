import{r as w,a as I,j as e,R as xe}from"./client-DvaAtPIX.js";function he(t,r){const[s,n]=w.useState(t);return w.useEffect(()=>{const o=setTimeout(()=>{n(t)},r);return()=>clearTimeout(o)},[t,r]),s}const W=t=>{let r;const s=new Set,n=(x,d)=>{const h=typeof x=="function"?x(r):x;if(!Object.is(h,r)){const g=r;r=d??(typeof h!="object"||h===null)?h:Object.assign({},r,h),s.forEach(f=>f(r,g))}},o=()=>r,c={setState:n,getState:o,getInitialState:()=>m,subscribe:x=>(s.add(x),()=>s.delete(x))},m=r=t(n,o,c);return c},pe=t=>t?W(t):W,ge=t=>t;function fe(t,r=ge){const s=I.useSyncExternalStore(t.subscribe,I.useCallback(()=>r(t.getState()),[t,r]),I.useCallback(()=>r(t.getInitialState()),[t,r]));return I.useDebugValue(s),s}const z=t=>{const r=pe(t),s=n=>fe(r,n);return Object.assign(s,r),s},O=t=>t?z(t):z;function be(t,r){let s;try{s=t()}catch{return}return{getItem:o=>{var a;const i=m=>m===null?null:JSON.parse(m,void 0),c=(a=s.getItem(o))!=null?a:null;return c instanceof Promise?c.then(i):i(c)},setItem:(o,a)=>s.setItem(o,JSON.stringify(a,void 0)),removeItem:o=>s.removeItem(o)}}const U=t=>r=>{try{const s=t(r);return s instanceof Promise?s:{then(n){return U(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return U(n)(s)}}}},ye=(t,r)=>(s,n,o)=>{let a={storage:be(()=>localStorage),partialize:l=>l,version:0,merge:(l,p)=>({...p,...l}),...r},i=!1;const c=new Set,m=new Set;let x=a.storage;if(!x)return t((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...l)},n,o);const d=()=>{const l=a.partialize({...n()});return x.setItem(a.name,{state:l,version:a.version})},h=o.setState;o.setState=(l,p)=>(h(l,p),d());const g=t((...l)=>(s(...l),d()),n,o);o.getInitialState=()=>g;let f;const u=()=>{var l,p;if(!x)return;i=!1,c.forEach(b=>{var N;return b((N=n())!=null?N:g)});const C=((p=a.onRehydrateStorage)==null?void 0:p.call(a,(l=n())!=null?l:g))||void 0;return U(x.getItem.bind(x))(a.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==a.version){if(a.migrate){const N=a.migrate(b.state,b.version);return N instanceof Promise?N.then(P=>[!0,P]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var N;const[P,T]=b;if(f=a.merge(T,(N=n())!=null?N:g),s(f,!0),P)return d()}).then(()=>{C?.(f,void 0),f=n(),i=!0,m.forEach(b=>b(f))}).catch(b=>{C?.(void 0,b)})};return o.persist={setOptions:l=>{a={...a,...l},l.storage&&(x=l.storage)},clearStorage:()=>{x?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>u(),hasHydrated:()=>i,onHydrate:l=>(c.add(l),()=>{c.delete(l)}),onFinishHydration:l=>(m.add(l),()=>{m.delete(l)})},a.skipHydration||u(),f||g},B=ye,J=9999,$=1e5,je=3e3,Ne=500,q={CART:"cart",PRODUCTS:"products",COUPONS:"coupons"},ve=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],Ce=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],M={name:"",price:0,stock:0,description:"",discounts:[]},K={name:"",code:"",discountType:"amount",discountValue:0},we={quantity:10,rate:.1},D={PRODUCT_ADDED:"상품이 추가되었습니다.",PRODUCT_UPDATED:"상품이 수정되었습니다.",PRODUCT_DELETED:"상품이 삭제되었습니다.",COUPON_ADDED:"쿠폰이 추가되었습니다.",COUPON_DELETED:"쿠폰이 삭제되었습니다.",DUPLICATE_COUPON_CODE:"이미 존재하는 쿠폰 코드입니다."},ke={getItem:t=>{const r=localStorage.getItem(t);if(!r)return null;try{const s=JSON.parse(r);return s&&typeof s=="object"&&"state"in s?s:Array.isArray(s)?{state:{cart:s},version:0}:null}catch{return null}},setItem:(t,r)=>{try{r&&r.state&&r.state.cart&&localStorage.setItem(t,JSON.stringify(r.state.cart))}catch{}},removeItem:t=>{localStorage.removeItem(t)}},Se={getItem:t=>{const r=localStorage.getItem(t);if(!r)return null;try{const s=JSON.parse(r);return s&&typeof s=="object"&&"state"in s?s:Array.isArray(s)?{state:{products:s},version:0}:null}catch{return null}},setItem:(t,r)=>{try{r&&r.state&&r.state.products&&localStorage.setItem(t,JSON.stringify(r.state.products))}catch{}},removeItem:t=>{localStorage.removeItem(t)}},Y=O()(B(t=>({products:ve,addProduct:r=>{const s={...r,id:`p${Date.now()}`};t(n=>({products:[...n.products,s]}))},updateProduct:(r,s)=>{t(n=>({products:n.products.map(o=>o.id===r?{...o,...s}:o)}))},deleteProduct:r=>{t(s=>({products:s.products.filter(n=>n.id!==r)}))},updateProductStock:(r,s)=>{t(n=>({products:n.products.map(o=>o.id===r?{...o,stock:s}:o)}))},addProductDiscount:(r,s)=>{t(n=>({products:n.products.map(o=>o.id===r?{...o,discounts:[...o.discounts,s]}:o)}))},removeProductDiscount:(r,s)=>{t(n=>({products:n.products.map(o=>o.id===r?{...o,discounts:o.discounts.filter((a,i)=>i!==s)}:o)}))}}),{name:q.PRODUCTS,storage:Se,partialize:t=>({products:t.products})})),Z=O()(B((t,r)=>({coupons:Ce,addCoupon:s=>r().coupons.find(o=>o.code===s.code)?!1:(t(o=>({coupons:[...o.coupons,s]})),!0),removeCoupon:s=>{t(n=>({coupons:n.coupons.filter(o=>o.code!==s)}))}}),{name:q.COUPONS})),Pe=(t,r)=>{const{discounts:s}=t.product,{quantity:n}=t,o=s.reduce((i,c)=>n>=c.quantity&&c.rate>i?c.rate:i,0);return r.some(i=>i.quantity>=10)?Math.min(o+.05,.5):o},ee=(t,r)=>{const{price:s}=t.product,{quantity:n}=t,o=Pe(t,r);return Math.round(s*n*(1-o))},Q=(t,r)=>{let s=0,n=0;return t.forEach(o=>{const a=o.product.price*o.quantity;s+=a,n+=ee(o,t)}),r&&(r.discountType==="amount"?n=Math.max(0,n-r.discountValue):n=Math.round(n*(1-r.discountValue/100))),{totalBeforeDiscount:Math.round(s),totalAfterDiscount:Math.round(n)}},G=(t,r)=>{const s=r.find(n=>n.product.id===t.id);return t.stock-(s?.quantity||0)},_=O()(B((t,r)=>({cart:[],selectedCoupon:null,getTotalItemCount:()=>r().cart.reduce((s,n)=>s+n.quantity,0),getRemainingStock:s=>G(s,r().cart),calculateItemTotal:s=>ee(s,r().cart),calculateCartTotal:()=>Q(r().cart,r().selectedCoupon),addToCart:s=>{const{cart:n}=r();if(G(s,n)<=0)return{success:!1,message:"재고가 부족합니다!"};const a=n.find(i=>i.product.id===s.id);if(a){const i=a.quantity+1;if(i>s.stock)return{success:!1,message:"재고가 부족합니다!"};t({cart:n.map(c=>c.product.id===s.id?{...c,quantity:i}:c)})}else t({cart:[...n,{product:s,quantity:1}]});return{success:!0,message:"장바구니에 담았습니다"}},removeFromCart:s=>{t(n=>({cart:n.cart.filter(o=>o.product.id!==s)}))},updateQuantity:(s,n,o)=>{if(n<=0)return r().removeFromCart(s),{success:!0};const a=o.find(c=>c.id===s);if(!a)return{success:!1};const i=a.stock;return n>i?{success:!1,message:`재고는 ${i}개까지만 있습니다.`}:(t(c=>({cart:c.cart.map(m=>m.product.id===s?{...m,quantity:n}:m)})),{success:!0})},applyCoupon:s=>{const{cart:n}=r();return Q(n,null).totalAfterDiscount<1e4&&s.discountType==="percentage"?{success:!1,message:"percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다."}:(t({selectedCoupon:s}),{success:!0,message:"쿠폰이 적용되었습니다."})},clearCoupon:()=>{t({selectedCoupon:null})},clearCart:()=>{t({cart:[],selectedCoupon:null})}}),{name:q.CART,storage:ke,partialize:t=>({cart:t.cart})})),E=O(t=>({isAdmin:!1,setIsAdmin:r=>t({isAdmin:r}),toggleAdmin:()=>t(r=>({isAdmin:!r.isAdmin})),searchTerm:"",setSearchTerm:r=>t({searchTerm:r}),notifications:[],addNotification:(r,s="success")=>{const n=Date.now().toString();t(o=>({notifications:[...o.notifications,{id:n,message:r,type:s}]})),setTimeout(()=>{t(o=>({notifications:o.notifications.filter(a=>a.id!==n)}))},je)},removeNotification:r=>{t(s=>({notifications:s.notifications.filter(n=>n.id!==r)}))}})),F=t=>{if(t==="")return 0;const r=parseInt(t,10);return isNaN(r)?0:r},R=t=>t===""||/^\d+$/.test(t),De=O((t,r)=>({activeTab:"products",setActiveTab:s=>t({activeTab:s}),showProductForm:!1,editingProduct:null,productForm:{...M,discounts:[]},setShowProductForm:s=>t({showProductForm:s}),setEditingProduct:s=>t({editingProduct:s}),setProductForm:s=>t({productForm:s}),updateProductFormField:(s,n)=>t(o=>({productForm:{...o.productForm,[s]:n}})),resetProductForm:()=>t({editingProduct:null,productForm:{...M,discounts:[]},showProductForm:!1}),startEditProduct:s=>t({editingProduct:s.id,productForm:{name:s.name,price:s.price,stock:s.stock,description:s.description||"",discounts:s.discounts||[]},showProductForm:!0}),startAddProduct:()=>t({editingProduct:"new",productForm:{...M,discounts:[]},showProductForm:!0}),handleProductNameChange:s=>t(n=>({productForm:{...n.productForm,name:s}})),handleProductDescriptionChange:s=>t(n=>({productForm:{...n.productForm,description:s}})),handlePriceChange:s=>{R(s)&&t(n=>({productForm:{...n.productForm,price:s===""?0:F(s)}}))},handlePriceBlur:(s,n)=>{s===""?t(o=>({productForm:{...o.productForm,price:0}})):F(s)<0&&(n("가격은 0보다 커야 합니다","error"),t(o=>({productForm:{...o.productForm,price:0}})))},handleStockChange:s=>{R(s)&&t(n=>({productForm:{...n.productForm,stock:s===""?0:F(s)}}))},handleStockBlur:(s,n)=>{const o=F(s);s===""?t(a=>({productForm:{...a.productForm,stock:0}})):o<0?(n("재고는 0보다 커야 합니다","error"),t(a=>({productForm:{...a.productForm,stock:0}}))):o>J&&(n("재고는 9999개를 초과할 수 없습니다","error"),t(a=>({productForm:{...a.productForm,stock:J}})))},handleDiscountsChange:s=>t(n=>({productForm:{...n.productForm,discounts:s}})),showCouponForm:!1,couponForm:{...K},setShowCouponForm:s=>t({showCouponForm:s}),setCouponForm:s=>t({couponForm:s}),updateCouponFormField:(s,n)=>t(o=>({couponForm:{...o.couponForm,[s]:n}})),resetCouponForm:()=>t({couponForm:{...K},showCouponForm:!1}),toggleCouponForm:()=>t(s=>({showCouponForm:!s.showCouponForm})),handleCouponNameChange:s=>t(n=>({couponForm:{...n.couponForm,name:s}})),handleCouponCodeChange:s=>t(n=>({couponForm:{...n.couponForm,code:s.toUpperCase()}})),handleCouponTypeChange:s=>t(n=>({couponForm:{...n.couponForm,discountType:s}})),handleDiscountValueChange:s=>{R(s)&&t(n=>({couponForm:{...n.couponForm,discountValue:s===""?0:F(s)}}))},handleDiscountValueBlur:s=>{const{couponForm:n}=r(),o=n.discountValue;n.discountType==="percentage"?o>100?(s("할인율은 100%를 초과할 수 없습니다","error"),t(a=>({couponForm:{...a.couponForm,discountValue:100}}))):o<0&&t(a=>({couponForm:{...a.couponForm,discountValue:0}})):o>$?(s("할인 금액은 100,000원을 초과할 수 없습니다","error"),t(a=>({couponForm:{...a.couponForm,discountValue:$}}))):o<0&&t(a=>({couponForm:{...a.couponForm,discountValue:0}}))}}));function Te(){return e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}function Fe(){return e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}function Ie(){return e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}function Oe(){return e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}function Ae(){return e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}function V(){return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}function Ee(){return e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}const S=(t,r=!0)=>{const s=t.toLocaleString("ko-KR");return r?s+"원":s},Le=t=>"₩"+t.toLocaleString("ko-KR"),X=t=>Math.round(t*100)+"%",Me=(t,r)=>t==="amount"?S(r)+" 할인":r+"% 할인",Re=()=>"ORD-"+Date.now();function Ue({product:t,remainingStock:r,formatPrice:s,onAddToCart:n}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx(Ee,{})}),t.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),t.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",X(Math.max(...t.discounts.map(o=>o.rate)))]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s(t.price,t.id)}),t.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[t.discounts[0].quantity,"개 이상 구매시 할인"," ",X(t.discounts[0].rate)]})]}),e.jsxs("div",{className:"mb-3",children:[r<=5&&r>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",r,"개 남음"]}),r>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",r,"개"]})]}),e.jsx("button",{onClick:()=>n(t),disabled:r<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${r<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:r<=0?"품절":"장바구니 담기"})]})]})}function _e({products:t,getRemainingStock:r,formatPrice:s,onAddToCart:n}){return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(o=>e.jsx(Ue,{product:o,remainingStock:r(o),formatPrice:s,onAddToCart:n},o.id))})}function Be({searchTerm:t}){return e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',t,'"에 대한 검색 결과가 없습니다.']})})}const qe=(t,r)=>{if(!r.trim())return t;const s=r.toLowerCase();return t.filter(n=>n.name.toLowerCase().includes(s)||n.description&&n.description.toLowerCase().includes(s))};function Ve({cart:t,coupons:r,selectedCoupon:s,totals:n,calculateItemTotal:o,onRemoveFromCart:a,onUpdateQuantity:i,onApplyCoupon:c,onClearCoupon:m,onCompleteOrder:x}){return e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Fe,{}),"장바구니"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:t.map(d=>{const h=o(d),g=d.product.price*d.quantity,f=h<g,u=f?Math.round((1-h/g)*100):0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:d.product.name}),e.jsx("button",{onClick:()=>a(d.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx(V,{})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>i(d.product.id,d.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:d.quantity}),e.jsx("button",{onClick:()=>i(d.product.id,d.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[f&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",u,"%"]}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S(Math.round(h))})]})]})]},d.product.id)})})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),r.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:s?.code||"",onChange:d=>{const h=r.find(g=>g.code===d.target.value);h?c(h):m()},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),r.map(d=>e.jsxs("option",{value:d.code,children:[d.name," (",d.discountType==="amount"?S(d.discountValue,!1):`${d.discountValue}%`,")"]},d.code))]})]}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsx("span",{className:"font-medium",children:S(n.totalBeforeDiscount)})]}),n.totalBeforeDiscount-n.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",S(n.totalBeforeDiscount-n.totalAfterDiscount)]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsx("span",{className:"font-bold text-lg text-gray-900",children:S(n.totalAfterDiscount)})]})]}),e.jsxs("button",{onClick:x,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[S(n.totalAfterDiscount)," 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})]})]})}function He({searchTerm:t}){const{products:r}=Y(),{coupons:s}=Z(),{cart:n,selectedCoupon:o,addToCart:a,removeFromCart:i,updateQuantity:c,applyCoupon:m,clearCoupon:x,clearCart:d,calculateItemTotal:h,calculateCartTotal:g,getRemainingStock:f}=_(),{addNotification:u}=E(),l=(v,j)=>{if(j){const k=r.find(L=>L.id===j);if(k&&f(k)<=0)return"SOLD OUT"}return Le(v)},p=w.useCallback(v=>{const j=a(v);j.message&&u(j.message,j.success?"success":"error")},[a,u]),C=w.useCallback(v=>{i(v)},[i]),b=w.useCallback((v,j)=>{const k=c(v,j,r);!k.success&&k.message&&u(k.message,"error")},[c,r,u]),N=w.useCallback(v=>{const j=m(v);j.message&&u(j.message,j.success?"success":"error")},[m,u]),P=w.useCallback(()=>{const v=Re();u("주문이 완료되었습니다. 주문번호: "+v,"success"),d()},[u,d]),T=g(),A=qe(r,t);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",r.length,"개 상품"]})]}),A.length===0?e.jsx(Be,{searchTerm:t}):e.jsx(_e,{products:A,getRemainingStock:f,formatPrice:l,onAddToCart:p})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ve,{cart:n,coupons:s,selectedCoupon:o,totals:T,calculateItemTotal:h,onRemoveFromCart:C,onUpdateQuantity:b,onApplyCoupon:N,onClearCoupon:x,onCompleteOrder:P})})]})}function We({editingProduct:t,productForm:r,onSubmit:s,onCancel:n,onNameChange:o,onDescriptionChange:a,onPriceChange:i,onPriceBlur:c,onStockChange:m,onStockBlur:x,onDiscountsChange:d}){const h=(u,l,p)=>{const C=[...r.discounts];C[u]={...C[u],[l]:p},d(C)},g=()=>{d([...r.discounts,we])},f=u=>{d(r.discounts.filter((l,p)=>p!==u))};return e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:r.name,onChange:u=>o(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:r.description,onChange:u=>a(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:r.price===0?"":r.price,onChange:u=>i(u.target.value),onBlur:u=>c(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:r.stock===0?"":r.stock,onChange:u=>m(u.target.value),onBlur:u=>x(u.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[r.discounts.map((u,l)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:u.quantity,onChange:p=>h(l,"quantity",parseInt(p.target.value)||0),className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:u.rate*100,onChange:p=>h(l,"rate",(parseInt(p.target.value)||0)/100),className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>f(l),className:"text-red-600 hover:text-red-800",children:e.jsx(V,{})})]},l)),e.jsx("button",{type:"button",onClick:g,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:t==="new"?"추가":"수정"})]})]})})}function ze({products:t,showProductForm:r,editingProduct:s,productForm:n,onStartAdd:o,onStartEdit:a,onDelete:i,onSubmit:c,onCancel:m,onNameChange:x,onDescriptionChange:d,onPriceChange:h,onPriceBlur:g,onStockChange:f,onStockBlur:u,onDiscountsChange:l}){return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S(p.price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(p.stock>10?"bg-green-100 text-green-800":p.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[p.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:p.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>a(p),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>i(p.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},p.id))})]})}),r&&e.jsx(We,{editingProduct:s,productForm:n,onSubmit:c,onCancel:m,onNameChange:x,onDescriptionChange:d,onPriceChange:h,onPriceBlur:g,onStockChange:f,onStockBlur:u,onDiscountsChange:l})]})}function Je({coupon:t,onDelete:r}){return e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:t.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:Me(t.discountType,t.discountValue)})})]}),e.jsx("button",{onClick:()=>r(t.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(Ae,{})})]})})}function $e({couponForm:t,onSubmit:r,onCancel:s,onNameChange:n,onCodeChange:o,onTypeChange:a,onValueChange:i,onValueBlur:c}){return e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:t.name,onChange:m=>n(m.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:t.code,onChange:m=>o(m.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:t.discountType,onChange:m=>a(m.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:t.discountValue===0?"":t.discountValue,onChange:m=>i(m.target.value),onBlur:c,className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:t.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})}function Ke({coupons:t,showCouponForm:r,couponForm:s,onToggleForm:n,onDelete:o,onSubmit:a,onCancel:i,onNameChange:c,onCodeChange:m,onTypeChange:x,onValueChange:d,onValueBlur:h}){return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(g=>e.jsx(Je,{coupon:g,onDelete:o},g.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx(Oe,{}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),r&&e.jsx($e,{couponForm:s,onSubmit:a,onCancel:i,onNameChange:c,onCodeChange:m,onTypeChange:x,onValueChange:d,onValueBlur:h})]})]})}function Qe(){const{products:t,addProduct:r,updateProduct:s,deleteProduct:n}=Y(),{coupons:o,addCoupon:a,removeCoupon:i}=Z(),{addNotification:c}=E(),{activeTab:m,setActiveTab:x,showProductForm:d,editingProduct:h,productForm:g,showCouponForm:f,couponForm:u,resetProductForm:l,startEditProduct:p,startAddProduct:C,resetCouponForm:b,toggleCouponForm:N,handleProductNameChange:P,handleProductDescriptionChange:T,handlePriceChange:A,handlePriceBlur:v,handleStockChange:j,handleStockBlur:k,handleDiscountsChange:L,handleCouponNameChange:te,handleCouponCodeChange:se,handleCouponTypeChange:re,handleDiscountValueChange:ne,handleDiscountValueBlur:oe}=De(),ae=w.useCallback(y=>{r(y),c(D.PRODUCT_ADDED,"success")},[r,c]),ce=w.useCallback((y,H)=>{s(y,H),c(D.PRODUCT_UPDATED,"success")},[s,c]),ie=w.useCallback(y=>{n(y),c(D.PRODUCT_DELETED,"success")},[n,c]),de=w.useCallback(y=>{a(y)?c(D.COUPON_ADDED,"success"):c(D.DUPLICATE_COUPON_CODE,"error")},[a,c]),le=w.useCallback(y=>{i(y),c(D.COUPON_DELETED,"success")},[i,c]),ue=y=>{y.preventDefault(),h&&h!=="new"?ce(h,g):ae({...g,discounts:g.discounts}),l()},me=y=>{y.preventDefault(),de(u),b()};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>x("products"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(m==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"상품 관리"}),e.jsx("button",{onClick:()=>x("coupons"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(m==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"쿠폰 관리"})]})}),m==="products"?e.jsx(ze,{products:t,showProductForm:d,editingProduct:h,productForm:g,onStartAdd:C,onStartEdit:p,onDelete:ie,onSubmit:ue,onCancel:l,onNameChange:P,onDescriptionChange:T,onPriceChange:A,onPriceBlur:y=>v(y,c),onStockChange:j,onStockBlur:y=>k(y,c),onDiscountsChange:L}):e.jsx(Ke,{coupons:o,showCouponForm:f,couponForm:u,onToggleForm:N,onDelete:le,onSubmit:me,onCancel:b,onNameChange:te,onCodeChange:se,onTypeChange:re,onValueChange:ne,onValueBlur:()=>oe(c)})]})}function Ge({searchTerm:t,onSearchChange:r}){return e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:t,onChange:s=>r(s.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})}function Xe(){const{isAdmin:t,searchTerm:r,toggleAdmin:s,setSearchTerm:n}=E(),o=_(c=>c.cart),i=_(c=>c.getTotalItemCount)();return e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!t&&e.jsx(Ge,{searchTerm:r,onSearchChange:n})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm rounded transition-colors "+(t?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"),children:t?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!t&&e.jsxs("div",{className:"relative",children:[e.jsx(Te,{}),o.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]})]})]})})})}function Ye({notifications:t,onRemove:r}){return t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:t.map(s=>e.jsxs("div",{className:"p-4 rounded-md shadow-md text-white flex justify-between items-center "+(s.type==="error"?"bg-red-600":s.type==="warning"?"bg-yellow-600":"bg-green-600"),children:[e.jsx("span",{className:"mr-2",children:s.message}),e.jsx("button",{onClick:()=>r(s.id),className:"text-white hover:text-gray-200",children:e.jsx(V,{})})]},s.id))})}const Ze=()=>{const{isAdmin:t,searchTerm:r,notifications:s,removeNotification:n}=E(),o=he(r,Ne);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ye,{notifications:s,onRemove:n}),e.jsx(Xe,{}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:t?e.jsx(Qe,{}):e.jsx(He,{searchTerm:o})})]})};xe.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(Ze,{})}));
